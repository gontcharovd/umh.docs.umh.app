---
title: "2. Data Acquisition and Manipulation"
menuTitle: "2. Data Acquisition and Manipulation"
description: |
  Learn how to connect various protocol converters to the UMH and format data into the
  UMH data model.
weight: 3000
---

Once your UMH instance is up and running, you can follow this guide to learn
how to connect the instance to an OPC UA server. For this example we will use
the OPC UA simulator that is provided by your instance.

## Connect to external devices

You can connect your UMH instances to devices via a wide range of protocols.
This is done in the Managament Console and consists of two steps. First you
establish a connection to the device and check if your instance can reach it.
In the second step you create a Data Flow Component for the connection, in which
you define the data you want to gather and how it shall be structured in
your Unified Namespace.

## Establishing a Connection

{{% notice note %}}
 To let you experience the UMH as quickly as possible, the connection to the
 internal OPC UA simulator is already preconfigured. This section is therefore
 only included for reference and you can continue with
 **Configure a Protocol Convereter** below.
{{% /notice %}}

1. To establish a new connection, navigate to the **Connections** section in the
  menu on the left and click on the **+ Add Connection** button in the right
  upper corner.

2. Under **General Settings** select your instance and give the connection a
  name. Enter the address and port of the device you want to connect.
  If you want to test this with the OPC UA simulator use:
    - **IP:** united-manufacturing-hub-opcuasimulator-service
    - **Port:** 46010

   You can also set additional fields for the location
   to keep a better overview of your connections. The fields already set by the
   selected instance can not be changed.

3. Once everything is set, you can click on **Save & Deploy**. The instance will
  now test to reach the device on the given IP and port. If there is no error it
  will be listed in the **Connections** section.
  
   Click on the connection to see its details, to edit them click on the
   **Configuration** button in the sidepanel.

## Add the Protocol Converter

1. To access the data from the OPC UA simulator, you have to add a
**Protocol Converter** to the connection. Click on the connection in the
**Connections** table, then open **Protocol Converter** in the side panel and
click on the **+Add Protocol Converter** button.

2. First you have to select the protocol that is used to communicate with the
 device, here this is **OPC UA**.

3. **Input:** Many of the required details are  already set, based on the
 connection details. For this tutorial we will subscribe to two tags on the
 OPC UA server. Copy the code below and replace the current `nodeIDs:` with it.

   ```yaml
    nodeIDs:
      - ns=2;s=Pressure
      - ns=2;s=Temperature
   ```

   It now should look like this. Note that the indentation is important.

   ```yaml
    opcua:
      endpoint: opc.tcp://united-manufacturing-hub-opcuasimulator-service.united-manufacturing-hub.svc.cluster.local:46010
      username: ""
      password: ""
      subscribeEnabled: true
      useHeartbeat: true
      nodeIDs:
        - ns=2;s=Pressure
   ```

4. **Processing:** In this section you can manipulate the incoming data and sort
  it into the desired asset. The autogenerated configuration will sort every tag
  into the same asset, based on the used location of the connection, while the
  tag name will be based on the name of the tag on the OPC UA server.

5. **Output:** The output section is completely autogenerated by the Management
  Console.

6. Now click on **Save & Deploy**. Your Protocol Converter will be added.

7. To view the data, navigate to the **Tag Browser** on the left. Here, you can
  see all your tags. The tree on the left is build from the asset of each tag,
  you can navigate it by clicking on the asset parts.

{{% notice note %}}
Learn more about
[Data Modeling in the Unified Namespace](https://learn.umh.app/lesson/data-modeling-in-the-unified-namespace-mqtt-kafka/)
in the Learning Hub.
{{% /notice %}}

## {{% heading "whatsnext" %}}

Next, we'll dive into [Data Visualization](/docs/getstarted/datavisualization),
where you'll learn to create Grafana dashboards using your newly configured data
sources. This next chapter will help you visualize and interpret your data effectively.